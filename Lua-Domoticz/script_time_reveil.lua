---------------------------------------------------------------------------
-- script_time_reveil.lua -------------------------------------------------
-- DumpDos 2017 -----------------------------------------------------------
---------------------------------------------------------------------------

-------------------------------------------------------------------------------------------------------------
----------------------------------------- Variables à Editer ------------------------------------------------
-------------------------------------------------------------------------------------------------------------

local variable	= "reveil"

-------------------------------------------------------------------------------------------------------------
---------------------------------------- Variables de Travail -----------------------------------------------
-------------------------------------------------------------------------------------------------------------

time = os.date("*t")
h = uservariables[variable]
heures = string.sub(h, 1, 2)
minutes = string.sub(h, 4, 5)
jour = string.sub(h, 9, 10)
mois = string.sub(h, 12, 13)
annee = string.sub(h, 15, 18)
t1 = os.time{year=annee, month=mois, day=jour, hour=heures, min=minutes, sec=00}
temps = os.difftime(t1, os.time())

--------------------------------------------------------------------------------------------------------------
---------------------------------------------- Fonctions -----------------------------------------------------
--------------------------------------------------------------------------------------------------------------

-- Fonction debugging --
function logs (x, Print_logs)
	 if (Print_logs) then
     print (x)
	 end
end

--------------------------------------------------------------------------------------------------------------
------------------------------------------------ Fin ---------------------------------------------------------
--------------------------------------------------------------------------------------------------------------


commandArray = {}

-- Récupération de l'heure --
now = os.date("*t")

-- Vérification des conditions --
if now.min % 1 == 0 then

print('test')

local heure_st, jour_semaine_st, jour_st, mois_st, annee_st = string.match (variable, "(%d%d%p%d%d)-(%d)-(%d%d)/(%d%d)/(%d%d)" )

print (heure_st)
print (jour_semaine_st)

print('test 2')
end

if (temps >= 540 and temps <= 600) then

os.execute('/home/pi/thery/scripts/hue/chambre/hue_control.sh 1200 255 454')

end
